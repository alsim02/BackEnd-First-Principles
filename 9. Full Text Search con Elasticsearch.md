# Appunti: Full Text Search con Elasticsearch

## 1. Problemi della ricerca testuale nei database relazionali tradizionali
- Con pochi dati (es. 5.000 prodotti), si usa query SQL con LIKE e wildcard `%` per cercare parole chiave.
- Quando i dati crescono (milioni di righe), queste query diventano lente (da millisecondi a secondi).
- Le ricerche non sono "intelligenti": non considerano rilevanza, frequenza, o errori di digitazione (typos).
- Esempio: cercando "laptop", il database può restituire risultati poco rilevanti o in ordine casuale.

## 2. Librarian Problem (problema del bibliotecario)
- Il database è come un bibliotecario che deve scorrere tutti i libri per trovare la parola.
- Questo approccio è lento e inefficiente su larga scala.

## 3. La rivoluzione dell’inverted index
- Invece di scansionare i libri, si crea un indice che associa ogni parola a un elenco di documenti (libri) che la contengono.
- Esempio: la parola "machine" punta ai libri e pagine in cui appare.
- Questa "inversione" rende la ricerca molto più veloce.

## 4. Elasticsearch e Apache Lucene
- Elasticsearch è uno strumento famoso che utilizza la tecnologia dell’inverted index tramite Apache Lucene.
- Supporta ricerche testuali full-text efficienti, con funzionalità avanzate come:
  - punteggio di rilevanza (relevance scoring),
  - gestione della frequenza dei termini,
  - ranking basato su posizione e frequenza,
  - "field boosting" (alcuni campi più importanti di altri).

## 5. Caratteristiche di rilevanza nei risultati
- Se la parola cercata è nel titolo, il risultato riceve un punteggio più alto.
- La frequenza del termine nel documento influenza il punteggio.
- La lunghezza del documento e la frequenza del termine su tutti i documenti sono altri fattori.
- Si usa l’algoritmo BM25 per calcolare la rilevanza.

## 6. Tolleranza agli errori e funzionalità smart
- Elasticsearch può gestire errori di digitazione (typos) e suggerire correzioni.
- Presenta risultati in modo progressivo (type-ahead), migliorando l’esperienza utente.

## 7. Dati e use case
- Elasticsearch non è l’unica opzione: anche PostgreSQL supporta full-text search.
- Viene spesso usato insieme a stack di gestione log come ELK (ElasticSearch, Logstash, Kibana).
- Utile per ricerche veloci su grandi quantità di testo (cataloghi prodotti, blog, log, profili utente, ecc.).

## 8. Dimostrazione pratica (demo)
- Popolamento di un database PostgreSQL e un indice Elasticsearch con 50.000 recensioni.
- Confronto fra ricerche con query LIKE in PostgreSQL e query full-text in Elasticsearch.
- Elasticsearch restituisce risultati in meno di 1 secondo, mentre PostgreSQL impiega diversi secondi.
- Elastic Search gestisce meglio rilevanza e performance in query testuali complesse.

---
